extends layout
block links
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="")
    link(rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous")

mixin week_dropdown(weeks)
    div.dropdown
        button#week_selection.btn.btn-secondary.dropdown-toggle.disabled(type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false") Select week
        div.dropdown-menu(aria-labelledby="week_selection")
            each file_name, index in weeks
                //if index === 1
                //    a.dropdown-item.active(href="javascript:void(0)" value=file_name)=file_name
                //else
                a.dropdown-item(href="javascript:void(0)" value=file_name)=file_name

block content
    div#console
        div.console_header
            svg(class="bd-placeholder-img rounded mr-2" width="20" height="20" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img")
                rect.message_color(width="100%" height="100%")
            strong.message_type
        div.console_body
            p.message

    div#density_map_area.row
        div#density_map_info.col-md-9
            h1 Density Map
        div#density_map_controls.col
            +week_dropdown(files)
    div.row
        div.col
            div#density_map

    div#trucks_map_area.row
        div#trucks_map_info.col-md-9
            h1 Trucks Map
        div#trucks_map_controls.col
            +week_dropdown(files)
    div.row
        div.col
            div#trucks_map

block scripts
    include dependency_scripts
    script(src='/javascripts/clientSocketIO.js')
    script(src='/javascripts/densityMapInteraction.js')
    script(src='/javascripts/trucksMapInteraction.js')